---
layout: post
title:  "实现一个微信红包金额分配算法"
date:   2021-07-07 20:00:00 +0800
categories: notes
tags: notes
comments: 1
---
> 实现一个类似微信的红包金额分配算法，例如小明在群里发了100元红包，设定10个人分，每个人抢到的金额随机分配。
> 1.所有人抢到的金额之和要等于红包金额，不能多也不能少。
> 2.每个人至少抢到1分钱。
> 3.要保证红包拆分的金额尽可能分布均衡，不要出现两极分化太严重的情况。

## 二倍均值法
就是把每次随机金额的上限定为剩余人均金额的**2倍**
假设当前红包金额为M元，剩余人数为N人，那么公式为：
```
每次抢到的金额 = 随机区间[0.01, M/N * 2 -0.01] 元
```
这个公式，保证了每次随机金额的平均值是相等的，不会因为抢红包的先后顺序而造成不公平。
